<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>아모여:아파트머시기이-게시판이든뭐든 자유롭게 바꾸세요</title>
    <link rel="icon" th:href="@{/img/logo.jpeg}">
    <link rel="stylesheet" th:href="@{/css/menu.css}">
</head>
<body>
<header>
    <div class="contentmenu" id="headerMenu">
        <a th:href="@{/index}" class="menu-link active">메뉴1</a>
        <a th:href="@{/}" class="menu-link">메뉴2</a>
        <a th:href="@{/}" class="menu-link">메뉴3</a>
    </div>
</header>
<aside class="sidebar">
    <div class="logo">
        <a th:href="@{/}"><img th:src="@{/img/logo.jpeg}" alt="로고"></a>
    </div>
    <div class="menu-item active" onclick="handleHomeClick(this)">
        <a th:href="@{/}"><img th:src="@{/img/after-home.png}" alt="공구" data-active-src="@{/img/after-home.png}" data-inactive-src="@{/img/before-home.png}"><div>공구</div></a>
    </div>
    <div class="menu-item" onclick="changeIconAndHideMenu(this, '/img/after-search.png')">
        <a th:href="@{/search}"><img th:src="@{/img/before-search.png}" alt="검색" data-active-src="@{/img/after-search.png}" data-inactive-src="@{/img/before-search.png}"><div>검색</div></a>
    </div>
    <div class="menu-item" onclick="changeIconAndHideMenu(this, '/img/after-dollar.png')">
        <a th:href="@{/price}"><img th:src="@{/img/before-dollar.png}" alt="물가" data-active-src="@{/img/after-dollar.png}" data-inactive-src="@{/img/before-dollar.png}"><div>물가</div></a>
    </div>
    <div class="menu-item profile" onclick="toggleProfileBorderAndHideMenu(this)">
        <a th:href="@{/mypage}"><img th:src="@{/img/before-profile.png}" alt="마이페이지" data-active-src="@{/img/after-profile.png}" data-inactive-src="@{/img/before-profile.png}"><div>마이페이지</div></a>
    </div>
</aside>
<div class="content">
    <div th:each="buyingUser, iterStat : ${buyingList}">
        <div class="post">
            <div class="post-header">
                <img class="profile-pic" th:src="@{/img/after-profile.png}" alt="profile picture">
                <div class="post-info">
                    <div class="username" th:text="${userList[iterStat.index].userName}"></div>
                    <div class="post-date" th:text="${#dates.format(buyingUser.buyingDate, 'yyyy-MM-dd')}"></div>
                </div>
            </div>
            <div class="post-images">
                <img class="post-image" th:src="@{/img/sweet-potatoes.png}" alt="고구마">
                <img class="post-image" th:src="@{/img/sweet-potatoes.png}" alt="고구마">
                <img class="post-image" th:src="@{/img/sweet-potatoes.png}" alt="고구마">
                <img class="post-image" th:src="@{/img/sweet-potatoes.png}" alt="고구마">
            </div>
            <div class="post-description" th:text="${groupBuyingList[iterStat.index].buyingText}">Description</div>

            <div class="product-info mobile-view">
                <table>
                    <tr>
                        <th>품목</th>
                        <td th:text="${groupBuyingList[iterStat.index].buyingItem}">고구마</td>
                    </tr>
                    <tr>
                        <th>가격</th>
                        <td th:text="${groupBuyingList[iterStat.index].buyingPrice}"></td>
                    </tr>
                    <tr>
                        <th>품질</th>
                        <td th:text="${groupBuyingList[iterStat.index].buyingQuality}">A+</td>
                    </tr>
                </table>
            </div>
            <div class="post-actions">
                <div>
                    <img class="like-icon" th:src="@{/img/heart-icon.png}" alt="like icon" onclick="updateLikes(this)" th:data-likes="${buyingUser.buyingPerson}" th:data-kg="${buyingUser.buyingQuantity}" th:data-liked="false">
                    <span class="purchase-text" th:text="${buyingUser.buyingPerson} + ' 명이 구매했습니다.'">1 명이 구매했습니다.</span>
                </div>
                <button class="purchase-button" onclick="togglePurchaseSection(this)">신청</button>
            </div>
            <div class="purchase-section" style="display:none;">
                <p>물품 :</p>
                <div class="quantity-input">
                    <button onclick="decreaseQuantity(this)">-</button>
                    <input type="number" class="quantity" value="1" min="1">
                    <button onclick="increaseQuantity(this)">+</button>
                </div>
                <button onclick="submitPurchase(this)">확인</button>
            </div>
        </div>
    </div>
</div>



<footer class="footer">
    <div class="menu-item active" onclick="handleHomeClick(this)">
        <a th:href="@{/}"><img th:src="@{/img/after-home.png}" alt="공구" data-active-src="@{/img/after-home.png}" data-inactive-src="@{/img/before-home.png}"></a>
    </div>
    <div class="menu-item" onclick="changeIconAndHideMenu(this, '/img/after-search.png')">
        <a th:href="@{/search}"><img th:src="@{/img/before-search.png}" alt="검색" data-active-src="@{/img/after-search.png}" data-inactive-src="@{/img/before-search.png}"></a>
    </div>
    <div class="menu-item" onclick="changeIconAndHideMenu(this, '/img/after-dollar.png')">
        <a th:href="@{/price}"><img th:src="@{/img/before-dollar.png}" alt="물가" data-active-src="@{/img/after-dollar.png}" data-inactive-src="@{/img/before-dollar.png}"></a>
    </div>
    <div class="menu-item profile" onclick="toggleProfileBorderAndHideMenu(this)">
        <a th:href="@{/mypage}"><img th:src="@{/img/before-profile.png}" alt="마이페이지" data-active-src="@{/img/after-profile.png}" data-inactive-src="@{/img/before-profile.png}"></a>
    </div>
</footer>

<footer class="fixed-footer">
    <div>© 2024 Muyaho. All rights reserved.</div>
</footer>
</body>
</html>
